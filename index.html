<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Coronavirus India Dashboard</title>
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
     integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
     crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
     integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
     crossorigin=""></script>
    <style>
        .mapdiv {
          height: 70%;
          width: 70%;
          display:block;
          position:absolute;
          margin-top: 15px;
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
           }
                * {
          box-sizing: border-box;
        }

        body {
          font-family: Arial, Helvetica, sans-serif;
        }

        /* Attribute information at top right cornar of the map */
        .info {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255,255,255,0.8);
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        border-radius: 5px;
        }

        .info h4 {
            margin: 0 0 5px;
            color: #777;
        }

        /* Legend at bottom right corner */
        .legend {
            line-height: 18px;
            color: #555;
        }
        .legend i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.7;
        }

        /* Float four columns side by side */
        .column {
          float: left;
          width: 25%;
          padding: 0 10px;
        }
		
		.chart_div {
          float: right;
          width: 30%;
          padding: 15px;
		  padding-right: 5px;
        }

        /* Remove extra left and right margins, due to padding */
        .row {margin: 0 -5px;
}

        /* Clear floats after the columns */
        .row:after {
          content: "";
          display: table;
          clear: both;
        }

        /* Responsive columns */
        @media screen and (max-width: 800px) {
			.chart_div {
			  float: left;
			  width: 100%;
			  padding: 0 10px;
			}
			.mapdiv {
				height: 100%;
				width: 100%;
				display:block;
				position:absolute;
				box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
			   }
			  .column {
				width: 50%;
				display: block;
				margin-bottom: 20px;
			  }
        }

        /* Style the counter cards */
        .card {
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
          padding: 16px;
          text-align: center;
          background-color: #f1f1f1;
        }
        #menu{
            width:100%;
            height:44px;
            background-color : black;
        }
        #menutext{
            color : white;
            text-align: center;
            font-size: 25px;
            font-family: "Segoe UI",Arial,sans-serif;
            margin: auto;
        }
    </style>
</head>
<body style="margin:0px;">
<div id="menu"><p id="menutext" style="color:white; text-align:center;"><b>Corona Virus Status in India</b></p></div>
<div class="row">
    <p style="text-align:center;"> Data as on 24th March 2020<p>
  <div class="column">
    <div class="card">
      <h3>Active Cases (Global)</h3>
      <p>Total</p>
      <p>Last 24hrs</p>
    </div>
  </div>

  <div class="column">
    <div class="card">
      <h3>Deaths (Global)</h3>
      <p>Total</p>
      <p>Last 24hrs</p>
    </div>
  </div>

  <div class="column">
    <div class="card">
      <h3>Active Cases (India)</h3>
      <p>Total</p>
      <p>Last 24hrs</p>
    </div>
  </div>

  <div class="column">
    <div class="card">
      <h3>Deaths (India)</h3>
      <p>Total</p>
      <p>Last 24hrs</p>
    </div>
  </div>
</div>
<div class="row" style="width:100%; height:100%">
  <div class = "mapdiv" id="map">
    <script type="text/javascript" src="indiastates.js"></script>
    <script>
      var map = L.map('map').setView([21.9899, 76.6280], 5);
      var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar', attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}).addTo(map);

      // https://leafletjs.com/examples/choropleth/
      // Choropleth map style
      function getColor(d) {
        return d > 30 ? '#800026' :
            d > 25  ? '#BD0026' :
            d > 20  ? '#E31A1C' :
            d > 15  ? '#FC4E2A' :
            d > 10   ? '#FD8D3C' :
            d > 5   ? '#FEB24C' :
            d == null   ? '#FED976' :
                  '#FFEDA0';
      }
      function style(feature) {
        return {
          weight: 2,
          opacity: 1,
          color: 'blue',
          fillColor: getColor(feature.properties["24 March"])
        };
      }

      // Visualizing attributes on map right top corner
      var info = L.control();
      info.onAdd = function (map) {
          this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
          this.update();
          return this._div;
      };
      info.update = function (props) {
          this._div.innerHTML = '<h4>COVID-19 Visualization in India</h4>' +  (props ?
              '<b> State Name </b>' + props["State"] + '</br>' + '<b> Cases </b>' + props["24 March"]  + '</br>' + '<b> Deaths </b>' + props.deaths
              : 'Hover over a AOI');
      };
      info.addTo(map);

      // Highlighting features
      function highlightFeature(e) {
        var layer = e.target;
        layer.setStyle({
            weight: 5,
            color: 'green',
            dashArray: '',
            fillOpacity: 0
        });
        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
            layer.bringToFront();
            info.update(layer.feature.properties);
        }
      }

      function resetHighlight(e) {
        geojson.resetStyle(e.target);
        info.update();
      }

      function zoomToFeature(e) {
        map.fitBounds(e.target.getBounds());
      }

      function onEachFeature(feature, layer) {
        layer.on({
            mouseover: highlightFeature,
            mouseout: resetHighlight,
            click: zoomToFeature
        });
      }

      var geojson = L.geoJSON(aoi, {
        style:style,
        onEachFeature: onEachFeature
      }).addTo(map);

      //Layer group
      var baseMaps ={
          "OpenStreetMap":osm
        };
      var overlayMaps ={
          "Area Boundaries":geojson
        };
      L.control.layers(baseMaps,overlayMaps).addTo(map);
      var legend = L.control({position: 'bottomright'});

      // Legend
      legend.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'info legend'),
                grades = [null, 5, 10, 15, 20, 25, 30, 35],
                labels = [];
            // loop through our density intervals and generate a label with a colored square for each interval
            for (var i = 0; i < grades.length; i++) {
                div.innerHTML +=
                    '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
                    grades[i] + (grades[i + 1] ? '&ndash;'+grades[i + 1] + '<br>': '+');
            }

            return div;
        };

        legend.addTo(map);
    </script>
  </div>
  <div class="chart_div">
    <div class="card">
      <h3>Deaths (India)</h3>
      <p>Total</p>
      <p>Last 24hrs</p>
    </div>
  </div>
</div>
</body>
</html>
